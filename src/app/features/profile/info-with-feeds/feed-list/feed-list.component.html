<div class="mt-20px"></div>

@for (feed of profileService.profile.feeds; let index = $index; track $index) {
<mat-card class="feed-card" appearance="outlined">
  <mat-card-header class="flex align-items-center">
    <div
      mat-card-avatar
      class="user-avatar"
      [ngStyle]="{
        'background-image': 'url(' + profileService.profile.photoURL + ')'
      }"
    ></div>
    <mat-card-title class="fs-18px">
      {{ profileService.profile.firstName }}
      {{ profileService.profile.lastName }}
    </mat-card-title>
    <mat-card-subtitle class="fs-13px flex align-items-center gap-10px">
      <div>
        {{ feed.createdAt | timeDiffText }}
      </div>
      <div class="mt-4px h-28px" [matMenuTriggerFor]="privacyMenu">
        @if (profileService.updatingPrivacy && (profileService.updatingFeedIndex
        === index)) {
        <mat-spinner class="mt-3px ml-5px h-18px w-18px"></mat-spinner>
        } @else {
        <mat-icon class="mt-2px off-black fs-18px pointer" matTooltip="{{ feed.privacyId | privacyType }}">
          {{ feed.privacyId | privacyIcon }}
        </mat-icon>
        }
        <mat-menu #privacyMenu="matMenu">
          @for (option of privacyOptions; track option.id) {
          <button
            mat-menu-item
            (click)="profileService.updateFeedPrivacy(index, option.id)"
          >
            <mat-icon class="icon"> {{ option.icon }} </mat-icon>
            <span [class.fw-600]="feed.privacyId === option.id">
              {{ option.label }}
            </span>
          </button>
          }
        </mat-menu>
      </div>
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <p>
      {{ feed.description }}
    </p>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button>LIKE</button>
    <button mat-button>SHARE</button>
  </mat-card-actions>
</mat-card>

}
