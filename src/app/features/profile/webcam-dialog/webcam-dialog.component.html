<h2 mat-dialog-title>Take a photo</h2>
<mat-dialog-content>
  @if (service.showWebCam) {
  <webcam
    class="mb-10px"
    [height]="500"
    [width]="500"
    [trigger]="service.triggerObservable"
    (imageCapture)="service.handleImage($event, data.profile.uid)"
    [imageQuality]="1"
  ></webcam>
  } @else {
  <div
    class="captured-image-section"
    [ngStyle]="{
      'background-image': 'url(' + service.imageDataUrl + ')'
    }"
  ></div>
  } @if (service.showWebCamOptions) { @if (service.showWebCam) {
  <div class="flex justify-content-center">
    <button mat-flat-button color="accent" (click)="service.triggerSnapshot()">
      Capture Image
    </button>
  </div>
  } @else {
  <div class="flex justify-content-center gap-10px">
    <button
      mat-flat-button
      color="accent"
      (click)="service.cropImage()"
      [disabled]="profileService.savingProfileImage"
    >
      Crop
    </button>
    <button
      mat-flat-button
      color="accent"
      (click)="service.switchCamera()"
      [disabled]="profileService.savingProfileImage"
    >
      Switch Camera
    </button>
    <button
      mat-flat-button
      color="accent"
      (click)="service.saveAsProfilePhoto(data.profile)"
      [disabled]="profileService.savingProfileImage"
    >
      <div class="flex justify-content-center gap-10px">
        <span>
          {{ profileService.savingProfileImage ? "Saving" : "Save" }}
        </span>

        @if (profileService.savingProfileImage) {
        <mat-spinner class="h-20px w-20px"></mat-spinner>
        }
      </div>
    </button>
  </div>
  } }
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button
    mat-button
    mat-dialog-close
    cdkFocusInitial
    [disabled]="profileService.savingProfileImage"
  >
    Close
  </button>
</mat-dialog-actions>
